# 주식 자동매매 프로그램 PRD (Product Requirements Document)

## 1. 개요 (Executive Summary)

### 1.1 프로젝트 배경
한국투자증권 Open API와 MCP 서버를 활용하여 국내 주식 시장(코스피/코스닥)을 대상으로 하는 자동매매 웹 애플리케이션을 개발합니다. 머신러닝/AI 기반의 자동매매 전략을 구현하며, 실전투자와 모의투자 환경을 모두 지원합니다. 웹 기반으로 개발하여 어디서나 접근 가능하며, Vercel을 통해 배포합니다.

### 1.2 비전
개인 투자자를 위한 지능형 자동매매 시스템으로, 리스크 관리, 실시간 모니터링, 백테스팅 기능을 갖춘 종합 트레이딩 솔루션을 제공합니다.

### 1.3 핵심 가치 제안
- **자동화된 거래**: ML/AI 기반 자동매매로 감정 없는 거래 실행
- **리스크 관리**: 손절매/익절매, 포지션 크기 관리, 일일 손실 한도 등 종합 리스크 관리
- **실시간 모니터링**: 웹소켓 기반 실시간 시세 및 체결 알림
- **전략 검증**: 백테스팅 기능으로 전략 성과 사전 검증
- **시각화**: 차트, 대시보드, 성과 분석을 통한 직관적인 정보 제공
- **원격 접근**: 웹 기반으로 어디서나 접속 가능
- **실시간 알림**: Slack을 통한 주요 이벤트 알림 (24/7 모니터링 불가 상황 대응)

## 2. 목표 및 성공 지표 (Objectives & Key Success Metrics)

### 2.1 주요 목표
1. **기능적 목표**
   - 국내 주식 자동매매 시스템 구축
   - 실전투자 및 모의투자 환경 지원
   - ML/AI 기반 거래 전략 구현
   - 실시간 시세 모니터링 및 알림

2. **비기능적 목표**
   - 안정적인 24시간 운영 (클라우드 환경)
   - 실시간 데이터 처리 지연 최소화
   - 모든 거래 내역 및 로그 기록
   - 웹 기반 접근성 (어디서나 접속 가능)
   - 실시간 알림 시스템 (Slack 통합)

### 2.2 성공 지표 (KPI)
- **정확도**: 자동매매 주문 실행 성공률 > 99%
- **지연시간**: 실시간 시세 수신 지연 < 1초
- **안정성**: 시스템 가동률 > 99.5%
- **백테스팅**: 과거 데이터 기반 전략 검증 정확도 측정

## 3. 주요 사용자 및 시나리오 (User Personas & Use Cases)

### 3.1 사용자 프로필
- **단일 사용자**: 개인 투자자 (본인)
- **기술 수준**: 개발 지식 없음 (모든 개발/디버그/수정/실행은 커서 에이전트가 담당)
- **사용 환경**: 웹 브라우저 (Chrome, Safari, Firefox 등) - macOS, Windows, 모바일 모두 지원
- **접속 방식**: Vercel을 통한 웹 배포 (https://your-app.vercel.app)
- **개발 프로세스**: 점진적 개발 방식 (한 번에 완벽한 프로그램보다 기능을 단계적으로 추가)
- **24/7 접속 불가**: 주요 이벤트는 Slack 알림으로 수신

### 3.2 주요 사용 시나리오

#### 시나리오 1: 자동매매 시작
1. 사용자가 웹 브라우저에서 애플리케이션 접속 (Vercel URL)
2. 로그인 및 인증 확인
3. 실전투자 또는 모의투자 모드 선택
4. 거래 전략 선택 및 파라미터 설정
5. 리스크 관리 설정 (손절매/익절매, 포지션 크기 등)
6. 자동매매 시작 버튼 클릭
7. 시스템이 실시간 시세를 모니터링하며 조건에 맞으면 자동 주문 실행
8. 주요 이벤트 발생 시 Slack 알림 수신

#### 시나리오 2: 실시간 모니터링
1. 웹 대시보드에서 현재 보유 포지션 확인
2. 실시간 시세 차트 확인
3. 체결 알림 수신 (웹 대시보드 + Slack)
4. 수익/손실 현황 실시간 확인
5. 모바일에서도 접속하여 확인 가능

#### 시나리오 3: 전략 백테스팅
1. 과거 전략 선택
2. 백테스팅 기간 설정
3. 백테스팅 실행
4. 성과 분석 결과 확인 (수익률, 승률, 최대 낙폭 등)

#### 시나리오 4: 리스크 관리
1. 일일 손실 한도 도달 시 자동 거래 중단
2. 손절매/익절매 조건 도달 시 자동 청산
3. 포지션 크기 초과 시 경고 알림

## 4. 기능 요구사항 (Functional Requirements)

### 4.1 인증 및 계정 관리
- **FR-1.1**: 한국투자증권 Open API 인증 (앱키/앱시크릿 기반)
- **FR-1.2**: 접근 토큰 자동 갱신
- **FR-1.3**: 실전투자(prod) 및 모의투자(vps) 환경 전환
- **FR-1.4**: 계좌 정보 조회 및 관리

### 4.2 시세 조회 및 실시간 데이터
- **FR-2.1**: 현재가 조회 (국내 주식)
- **FR-2.2**: 호가창 조회 (매수/매도 호가 및 잔량)
- **FR-2.3**: 체결 내역 조회
- **FR-2.4**: 분봉/일봉 차트 데이터 조회
- **FR-2.5**: 웹소켓 기반 실시간 시세 수신
- **FR-2.6**: 웹소켓 기반 실시간 호가 수신
- **FR-2.7**: 웹소켓 기반 실시간 체결 알림

### 4.3 주문 기능
- **FR-3.1**: 시장가 주문
- **FR-3.2**: 지정가 주문
- **FR-3.3**: 주문 취소
- **FR-3.4**: 주문 수정
- **FR-3.5**: 자동 주문 실행 (전략 기반)

### 4.4 계좌 및 잔고 관리
- **FR-4.1**: 보유 종목 잔고 조회
- **FR-4.2**: 계좌 잔액 조회
- **FR-4.3**: 평가손익 조회
- **FR-4.4**: 주문 체결 내역 조회

### 4.5 자동매매 전략
- **FR-5.1**: 규칙 기반 전략 (MVP)
  - 이동평균선 교차 전략
  - RSI 과매수/과매도 전략
  - 사용자 정의 규칙 전략
- **FR-5.2**: ML/AI 기반 전략 (향후 확장)
  - 시계열 예측 모델
  - 강화학습 기반 전략
  - 앙상블 모델

### 4.6 리스크 관리
- **FR-6.1**: 손절매 자동 실행 (손실률 도달 시)
- **FR-6.2**: 익절매 자동 실행 (수익률 도달 시)
- **FR-6.3**: 포지션 크기 관리 (계좌 자산의 일정 비율 제한)
- **FR-6.4**: 일일 손실 한도 설정 및 자동 거래 중단
- **FR-6.5**: 최대 보유 종목 수 제한

### 4.7 백테스팅
- **FR-7.1**: 과거 시세 데이터 로드
- **FR-7.2**: 전략 시뮬레이션 실행
- **FR-7.3**: 성과 지표 계산 (수익률, 승률, 샤프 비율, 최대 낙폭 등)
- **FR-7.4**: 백테스팅 결과 시각화

### 4.8 알림 및 모니터링
- **FR-8.1**: 실시간 주문 체결 알림 (웹 대시보드 + Slack)
- **FR-8.2**: 조건부 알림 (특정 가격 도달, 지표 변화 등) - Slack 전송
- **FR-8.3**: 리스크 경고 알림 (손실 한도 도달, 포지션 초과 등) - Slack 전송
- **FR-8.4**: 시스템 오류 알림 - Slack 전송
- **FR-8.5**: Slack 웹훅 연동을 통한 실시간 알림 전송
- **FR-8.6**: 알림 중요도별 채널 분리 (긴급/일반/정보)

### 4.9 데이터 저장 및 관리
- **FR-9.1**: 시세 이력 저장 (분봉, 일봉 데이터)
- **FR-9.2**: 주문 내역 저장
- **FR-9.3**: 체결 내역 저장
- **FR-9.4**: 트레이딩 로그 저장
- **FR-9.5**: 전략 실행 결과 저장
- **FR-9.6**: 백테스팅 결과 저장

### 4.10 시각화 및 대시보드
- **FR-10.1**: 실시간 차트 (캔들스틱, 선 그래프)
- **FR-10.2**: 포트폴리오 대시보드 (보유 종목, 수익률, 평가손익)
- **FR-10.3**: 성과 분석 그래프 (일별/월별 수익률, 승률 등)
- **FR-10.4**: 거래 내역 테이블
- **FR-10.5**: 리스크 지표 시각화

## 5. 비기능 요구사항 (Non-functional Requirements)

### 5.1 성능
- **NFR-1.1**: 실시간 시세 수신 지연 < 1초
- **NFR-1.2**: 주문 실행 응답 시간 < 2초
- **NFR-1.3**: 동시 모니터링 종목 수: 최소 10개 이상
- **NFR-1.4**: 백테스팅 처리: 1년 데이터 기준 < 5분

### 5.2 신뢰성 및 가용성
- **NFR-2.1**: 시스템 가동률 > 99.5%
- **NFR-2.2**: API 통신 오류 시 자동 재시도 (최대 3회)
- **NFR-2.3**: 웹소켓 연결 끊김 시 자동 재연결
- **NFR-2.4**: 예외 상황 로깅 및 복구 메커니즘

### 5.3 보안
- **NFR-3.1**: API 키/시크릿 암호화 저장
- **NFR-3.2**: 접근 토큰 안전한 관리
- **NFR-3.3**: 로컬 데이터베이스 암호화
- **NFR-3.4**: 민감 정보 로그에서 제외

### 5.4 사용성
- **NFR-4.1**: 직관적인 GUI 인터페이스
- **NFR-4.2**: 초기 설정 가이드 제공
- **NFR-4.3**: 오류 메시지 명확한 표시
- **NFR-4.4**: 한국어 UI 지원

### 5.5 확장성
- **NFR-5.1**: 모듈화된 구조로 전략 추가 용이
- **NFR-5.2**: 향후 해외 주식, 선물/옵션 확장 가능한 구조
- **NFR-5.3**: 플러그인 형태의 전략 추가 지원

### 5.6 개발 환경
- **NFR-6.1**: macOS 환경에서 개발 및 실행
- **NFR-6.2**: Python 3.9+ 지원
- **NFR-6.3**: 크로스 플랫폼 호환성 고려 (향후 확장 가능)

## 6. 기술 스택 및 아키텍처 (Tech Stack & Architecture)

### 6.1 기술 스택

#### 백엔드
- **언어**: Python 3.9+ (FastAPI)
- **API 프레임워크**: FastAPI (REST API + WebSocket 지원)
- **API 통신**: 
  - 한국투자증권 Open API (`open-trading-api` 레포지토리 활용)
  - MCP 서버 (`koreainvestment-mcp` 레포지토리 활용)
  - 프로젝트 `docs/API/` 폴더의 CSV 문서 활용 (최신 정보는 KIS GitHub 레포지토리 우선)
- **웹소켓**: `websocket-client` 또는 `websockets`
- **데이터베이스**: PostgreSQL (Supabase 또는 Railway 무료 플랜) 또는 SQLite (초기 개발)
- **데이터 분석**: pandas, numpy
- **ML/AI**: scikit-learn, tensorflow/pytorch (향후)
- **알림 시스템**: Slack Webhook API
- **배포**: Railway 또는 Render (백엔드 서버)

#### 프론트엔드 (데스크탑)
- **프레임워크**: PyQt6 (macOS 호환성 우수)
- **차트 라이브러리**: matplotlib, plotly, 또는 mplfinance
- **비동기 처리**: asyncio

#### 데이터 저장
- **시세 데이터**: SQLite 또는 CSV
- **거래 로그**: SQLite
- **설정 파일**: YAML 또는 JSON

### 6.2 시스템 아키텍처

```
┌─────────────────────────────────────────────────────────┐
│              Web Browser (Client)                        │
│  ┌──────────────────────────────────────────────────┐  │
│  │  Next.js Frontend (Vercel)                        │  │
│  │  - Dashboard UI                                  │  │
│  │  - Charts & Visualization                        │  │
│  │  - Real-time Updates (WebSocket)                 │  │
│  └──────────────┬───────────────────────────────────┘  │
└─────────────────┼───────────────────────────────────────┘
                  │ HTTPS / WebSocket
┌─────────────────▼───────────────────────────────────────┐
│         FastAPI Backend (Railway/Render)                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  │
│  │  API Layer   │  │ Business     │  │  Data Layer  │  │
│  │  (FastAPI)   │  │  Logic       │  │  (PostgreSQL) │  │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘  │
│         │                  │                  │          │
│  ┌──────┴──────────────────┴──────────────────┴──────┐  │
│  │           Trading Engine (Core)                    │  │
│  │  - Strategy Manager                                │  │
│  │  - Risk Manager                                    │  │
│  │  - Order Manager                                   │  │
│  │  - Backtesting Engine                              │  │
│  │  - Notification Manager (Slack)                     │  │
│  └──────────────────┬─────────────────────────────────┘  │
└────────────────────┼─────────────────────────────────────┘
                     │
         ┌───────────┴───────────┐
         │                       │
    ┌────▼────┐          ┌──────▼──────┐
    │ REST API│          │ WebSocket   │
    │ Client  │          │ Client      │
    └────┬────┘          └──────┬──────┘
         │                      │
         └──────────┬───────────┘
                    │
         ┌──────────▼──────────┐
         │  한국투자증권 Open API │
         │  - REST API          │
         │  - WebSocket API     │
         └─────────────────────┘
                    │
         ┌──────────▼──────────┐
         │  Slack Webhook API  │
         │  (알림 전송)         │
         └────────────────────┘
```

### 6.3 주요 모듈 구조

```
trading/
├── frontend/                    # Next.js 프론트엔드
│   ├── app/                     # Next.js App Router
│   ├── components/              # React 컴포넌트
│   │   ├── dashboard/
│   │   ├── charts/
│   │   └── settings/
│   ├── lib/                     # 유틸리티
│   └── public/                  # 정적 파일
├── backend/                     # FastAPI 백엔드
│   ├── app/
│   │   ├── api/                 # API 라우터
│   │   ├── auth/                # 인증 모듈
│   │   ├── trading/
│   │   │   ├── strategy/        # 전략 모듈
│   │   │   ├── risk/            # 리스크 관리
│   │   │   ├── order/           # 주문 관리
│   │   │   └── engine.py        # 트레이딩 엔진
│   │   ├── backtesting/         # 백테스팅
│   │   ├── data/                # 데이터 관리
│   │   └── notifications/       # 알림 모듈 (Slack)
│   ├── config/                  # 설정 파일
│   └── requirements.txt
├── docs/
│   └── API/                     # API 문서 (CSV 파일들)
├── tests/
└── README.md
```

## 7. UI/UX 개요 및 사용자 흐름 (UI/UX Overview & User Flows)

### 7.1 주요 화면 구성

#### 화면 1: 메인 대시보드
- 포트폴리오 현황 (보유 종목, 평가손익, 수익률)
- 실시간 차트 (WebSocket 기반)
- 최근 거래 내역
- 시스템 상태 (연결 상태, 실행 중인 전략)
- Slack 알림 설정 및 테스트

#### 화면 2: 자동매매 설정
- 전략 선택 및 파라미터 설정
- 리스크 관리 설정
- 모니터링 종목 선택
- 시작/중지 버튼

#### 화면 3: 백테스팅
- 전략 선택
- 기간 설정
- 실행 및 결과 확인

#### 화면 4: 설정
- API 인증 정보
- 계좌 정보
- 알림 설정
- 데이터 관리

### 7.2 사용자 흐름도

```
[웹 브라우저 접속]
    │
    ├─→ [Vercel URL 접속] ──→ [로그인]
    │                            │
    │                            ├─→ [인증 확인] ──→ [메인 대시보드]
    │                            │                        │
    │                            │                        ├─→ [자동매매 설정] ──→ [자동매매 실행]
    │                            │                        │                        │
    │                            │                        │                        └─→ [Slack 알림 수신]
    │                            │                        │
    │                            │                        ├─→ [백테스팅] ──→ [결과 확인]
    │                            │                        │
    │                            │                        └─→ [설정] ──→ [Slack 연동 설정]
    │                            │
    │                            └─→ [인증 실패] ──→ [설정 화면] ──→ [재시도]
    │
    └─→ [모바일 접속] ──→ [동일한 웹 인터페이스]
```

## 8. 보안, 규제, 인증 고려사항 (Security & Compliance)

### 8.1 보안 요구사항
- API 키/시크릿은 환경 변수 또는 암호화된 설정 파일에 저장
- 접근 토큰은 메모리에만 보관, 파일 저장 시 암호화
- 모든 API 통신은 HTTPS 사용
- 로컬 데이터베이스 암호화

### 8.2 규제 준수
- 한국투자증권 Open API 사용 약관 준수
- 개인정보보호법 준수 (로컬 데이터 관리)
- 금융투자업법 관련 고지사항 준수

### 8.3 책임 및 면책
- 자동매매로 인한 손실에 대한 책임은 사용자에게 있음을 명시
- 모의투자 환경에서 충분한 테스트 후 실전투자 진행 권장

### 8.4 배포 및 접속
- **프론트엔드 배포**: Vercel (무료 플랜)
  - GitHub 연동으로 자동 배포
  - 커스텀 도메인 지원 (선택사항)
  - HTTPS 자동 제공
- **백엔드 배포**: Railway 또는 Render (무료/저렴한 플랜)
  - 환경 변수로 API 키 관리
  - 데이터베이스 연동
- **접속 방법**: 
  - Vercel 배포 후 제공되는 URL로 접속 (예: `https://trading-app.vercel.app`)
  - 모바일 브라우저에서도 동일 URL로 접속 가능
  - 북마크 추가로 앱처럼 사용 가능

## 9. 데이터 관리 및 로깅 (Data & Logging)

### 9.1 데이터 저장 구조

#### 시세 데이터
- 테이블: `price_history`
- 컬럼: 종목코드, 일시, 시가, 고가, 저가, 종가, 거래량
- 보관 기간: 최소 1년

#### 거래 데이터
- 테이블: `orders`, `executions`
- 컬럼: 주문번호, 종목코드, 주문유형, 가격, 수량, 체결상태, 일시
- 보관 기간: 영구

#### 로그 데이터
- 테이블: `trading_logs`
- 컬럼: 일시, 레벨, 메시지, 상세정보
- 보관 기간: 최소 3개월

### 9.2 로깅 정책
- **레벨**: DEBUG, INFO, WARNING, ERROR, CRITICAL
- **로그 파일**: 일별 로그 파일 생성
- **로테이션**: 30일 이상 된 로그 자동 삭제 (설정 가능)

## 10. 마일스톤 및 일정 계획 (Milestones & Timeline)

프론트엔드와 백엔드를 병렬로 개발하여 개발 속도를 향상시킵니다. 각 Phase는 명확한 인터페이스와 의존성을 정의하여 독립적인 개발이 가능합니다.

### Phase 0: 공통 인프라 및 인터페이스 정의 (필수 선행 작업)
- **목적**: 프론트엔드와 백엔드가 독립적으로 개발할 수 있도록 인터페이스 정의
- **작업**: 프로젝트 구조 생성, API 스펙 정의, 공통 설정
- **의존성**: 없음
- **병렬 가능**: 아니오 (모든 Phase의 기반)
- **테스트**: 프로젝트 구조 및 스펙 검증

### Phase 1: 백엔드 코어 + 프론트엔드 코어 (병렬 개발)

#### Phase 1A: 백엔드 코어
- **목적**: 한국투자증권 API 통합 및 기본 백엔드 인프라 구축
- **작업**: 인증 모듈, API 클라이언트, 데이터베이스 설정, 기본 API 엔드포인트
- **의존성**: Phase 0 완료
- **병렬 가능**: Phase 1B와 병렬
- **테스트**: 인증 테스트, API 호출 테스트, 데이터베이스 연동 테스트

#### Phase 1B: 프론트엔드 코어
- **목적**: 기본 UI 구조 및 상태 관리 구축
- **작업**: Next.js 설정, UI 컴포넌트 라이브러리, 상태 관리, 기본 페이지 구조
- **의존성**: Phase 0 완료
- **병렬 가능**: Phase 1A와 병렬 (Mock 데이터 사용)
- **테스트**: UI 컴포넌트 테스트, 라우팅 테스트

### Phase 2: 백엔드 비즈니스 로직 + 프론트엔드 기능 (병렬 개발)

#### Phase 2A: 백엔드 비즈니스 로직
- **목적**: 자동매매 전략 및 주문 관리 구현
- **작업**: 전략 모듈, 주문 관리, 리스크 관리, API 엔드포인트 확장
- **의존성**: Phase 1A 완료
- **병렬 가능**: Phase 2B와 병렬
- **테스트**: 전략 로직 테스트, 주문 실행 테스트, 리스크 관리 테스트

#### Phase 2B: 프론트엔드 기능 구현
- **목적**: 실제 API 연동 및 주요 기능 UI 구현
- **작업**: API 연동, 대시보드 구현, 자동매매 설정 UI, 주문 관리 UI
- **의존성**: Phase 1B 완료, Phase 1A API 스펙 참조
- **병렬 가능**: Phase 2A와 병렬 (Mock 데이터로 먼저 개발 후 연동)
- **테스트**: API 연동 테스트, UI 기능 테스트, 통합 테스트

### Phase 3: 실시간 기능 및 통합 (순차/병렬 혼합)

#### Phase 3A: 백엔드 실시간 기능
- **목적**: WebSocket 및 실시간 알림 구현
- **작업**: WebSocket 서버, 알림 시스템 (Slack), 실시간 API
- **의존성**: Phase 2A 완료
- **병렬 가능**: Phase 3B와 부분 병렬
- **테스트**: WebSocket 연결 테스트, 실시간 데이터 전송 테스트, Slack 알림 테스트

#### Phase 3B: 프론트엔드 실시간 UI
- **목적**: 실시간 데이터 표시 및 차트 구현
- **작업**: WebSocket 클라이언트, 실시간 차트, 실시간 알림 UI
- **의존성**: Phase 2B 완료, Phase 3A WebSocket 스펙 참조
- **병렬 가능**: Phase 3A와 부분 병렬 (WebSocket 스펙 정의 후)
- **테스트**: WebSocket 클라이언트 테스트, 차트 렌더링 테스트, 실시간 업데이트 테스트

### Phase 4: 고급 기능 (병렬 개발)

#### Phase 4A: 백테스팅 엔진
- **목적**: 전략 백테스팅 기능 구현
- **작업**: 백테스팅 엔진, 백테스팅 API
- **의존성**: Phase 2A 완료
- **병렬 가능**: Phase 4B와 병렬
- **테스트**: 백테스팅 로직 테스트, 성과 지표 계산 테스트

#### Phase 4B: 백테스팅 UI 및 시각화
- **목적**: 백테스팅 결과 시각화 및 성과 분석
- **작업**: 백테스팅 UI, 고급 시각화
- **의존성**: Phase 2B 완료, Phase 4A API 스펙 참조
- **병렬 가능**: Phase 4A와 병렬 (API 스펙 정의 후)
- **테스트**: UI 테스트, 차트 렌더링 테스트, 데이터 시각화 테스트

### Phase 5: ML/AI 전략 (향후 확장)
- **목적**: 머신러닝 기반 전략 구현
- **작업**: ML 모델 개발, 전략 통합, 성능 최적화
- **의존성**: Phase 2 완료
- **병렬 가능**: 독립적으로 개발 가능
- **테스트**: ML 모델 테스트, 전략 성능 테스트

### 병렬 개발 전략 요약

| Phase | 백엔드 | 프론트엔드 | 병렬 가능 |
|-------|--------|-----------|----------|
| Phase 0 | 공통 인프라 | 공통 인프라 | ❌ (순차) |
| Phase 1 | 백엔드 코어 | 프론트엔드 코어 | ✅ |
| Phase 2 | 비즈니스 로직 | 기능 UI | ✅ |
| Phase 3 | 실시간 기능 | 실시간 UI | ⚠️ (부분 병렬) |
| Phase 4 | 백테스팅 엔진 | 백테스팅 UI | ✅ |

**참고**: 
- 각 Phase는 커서 에이전트가 직접 테스트를 수행하며, 테스트 통과 후 다음 Phase로 진행합니다.
- 병렬 개발 시 API 스펙을 우선 정의하고, 프론트엔드는 Mock 데이터로 먼저 개발한 후 실제 API와 연동합니다.
- 자세한 개발 프로세스는 `DEVELOPMENT.md`를 참조하세요.

## 11. 위험 및 리스크 관리 (Risks & Mitigations)

### 11.1 기술적 위험
- **위험**: API 통신 오류로 인한 주문 실패
- **완화**: 자동 재시도 메커니즘, 오류 로깅, 알림

### 11.2 운영 위험
- **위험**: 시스템 다운으로 인한 거래 기회 상실
- **완화**: 안정적인 에러 핸들링, 자동 복구 메커니즘

### 11.3 금융 위험
- **위험**: 자동매매로 인한 예상치 못한 손실
- **완화**: 리스크 관리 기능, 모의투자 환경에서 충분한 테스트

### 11.4 데이터 위험
- **위험**: 데이터 손실 또는 손상
- **완화**: 정기적인 백업, 데이터 무결성 검증

### 11.5 개발 프로세스 위험
- **위험**: 점진적 개발 과정에서 기능 누락 또는 불완전한 구현
- **완화**: 각 단계별 철저한 테스트, 커서 에이전트 자동 검증

## 12. 참고 자료 및 레포지토리

### 12.1 활용 레포지토리
- [한국투자증권 Open Trading API](https://github.com/koreainvestment/open-trading-api)
- [한국투자증권 MCP](https://github.com/koreainvestment/koreainvestment-mcp)
- [프로젝트 형상관리 레포지토리](https://github.com/r8qxq969n9-ship-it/trading.git) - 모든 소스 코드 및 문서 관리

### 12.2 API 문서
- 한국투자증권 Open API 포털: https://apiportal.koreainvestment.com
- 프로젝트 내 API 문서: `docs/API/` 폴더의 CSV 파일들 (337개 파일)
- **문서 우선순위**: KIS GitHub 레포지토리가 더 최신이면 우선 활용

### 12.3 알림 시스템 (Slack)
- **Slack 웹훅 설정**: 
  1. Slack 워크스페이스에서 Incoming Webhook 앱 추가
  2. 알림을 받을 채널 선택
  3. Webhook URL 생성 및 백엔드 환경 변수에 저장
- **알림 유형**:
  - 긴급: 주문 체결, 손실 한도 도달, 시스템 오류
  - 일반: 리스크 경고, 포지션 변경
  - 정보: 일일 수익률 요약, 전략 실행 결과
- **알림 포맷**: 
  - 구조화된 메시지 (제목, 본문, 링크, 색상 코딩)
  - 이모지 활용으로 가독성 향상
- **대안**: Notion API (향후 확장 가능)

### 12.4 관련 문서
- 개발 프로세스 및 테스트 전략: `DEVELOPMENT.md`

## 13. 부록

### 13.1 용어 정의
- **MVP**: Minimum Viable Product, 최소 기능 제품
- **백테스팅**: 과거 데이터를 사용하여 거래 전략의 성과를 시뮬레이션하는 것
- **리스크 관리**: 손실을 제한하고 포트폴리오를 보호하기 위한 전략
- **점진적 개발**: 한 번에 완벽한 프로그램을 만들기보다 기능을 단계적으로 추가하며 각 단계마다 테스트를 수행하는 개발 방법론

### 13.2 개발 환경
- **운영체제**: macOS (개발 환경)
- **배포 환경**: 
  - 프론트엔드: Vercel (클라우드)
  - 백엔드: Railway 또는 Render (클라우드)
- **개발 도구**: Cursor IDE (커서 에이전트 활용)
- **개발 방법론**: 점진적 개발 (Iterative Development)
- **테스트 전략**: 커서 에이전트 자동 테스트
- **접속 방법**: 웹 브라우저 (어디서나 접속 가능)

### 13.3 변경 이력
- 2026-01-18: 초안 작성
- 2026-01-18: 추가 요청사항 반영 (macOS 환경, 점진적 개발, 자동 테스트)
- 2026-01-18: 웹 애플리케이션으로 변경, Vercel 배포 추가, Slack 알림 시스템 추가
- 2026-01-18: 병렬 개발 Phase 구조로 재구성 (프론트엔드/백엔드 병렬 개발 전략 추가)